var Agile=A={version:"3.0.0",$:window.Zepto||jQuery,settings:{transitionType:"slide",transitionTime:250,transitionTimingFunc:"ease-in",toastDuration:3000,showPageLoading:false,basePagePath:"./",basePageSuffix:".html",crossDomainHandler:null,isAutoRender:false,slidingException:".sliding_container",lazyloadPlaceholder:""},mode:window.innerWidth<800?"phone":"tablet",hasTouch:"ontouchstart" in window,launchCompleted:false,hasAsideMenuOpen:false,hasPopupOpen:false,hasModalOpen:false,launch:function(a){$.extend(this.settings,a);this.Element.init();this.Router.init();this.AsideMenu.init();this.launchCompleted=true}};A.Element=(function($){var init=function(selector){if(selector){_initFormElement(selector);_init_scroll(selector.parents('article[data-scroll="true"]'));_init_lazyload(selector)}else{_init_section();_init_article();_init_modal()}};var _initFormElement=function(selector){var $el=$(selector||"body");if($el.length==0){return}for(var k in FORM_SELECTOR){$.map(_getMatchElements($el,FORM_SELECTOR[k].selector),function(el){var $obj=$(el);if($obj.attr("__form_element_init__")){return}FORM_SELECTOR[k].handler(el);$obj.attr("__form_element_init__",true)})}$el=null};var _getMatchElements=function($el,selector){return $el.find(selector).add($el.filter(selector))};var _init_section=function(){$(document).on("pageload","section",function(e){var $el=$(this);$el.data("__pageload_tag__",true);var func=$el.data("pageload");if(func){eval(func)}if(A.settings.isAutoRender){_init_inject($el)}if($el.data("article-slider")==true){var isSwipe=true;$el.on("touchstart","article",function(e){isSwipe=true;if($(e.target).parents(A.settings.slidingException).length>0){isSwipe=false}});$el.on("swipeRight","article",function(){var currentArticle=$(this);if(isSwipe){A.Transition.transArticle($el,currentArticle,currentArticle.prev("article"))}});$el.on("swipeLeft","article",function(atcObj){var currentArticle=$(this);if(isSwipe){A.Transition.transArticle($el,currentArticle,currentArticle.next("article"))}})}_init_scroll_orientation($el)});$(document).on("pageshow","section",function(e){var $el=$(this);if(!$el.data("__pageload_tag__")){$el.trigger("pageload")}var func=$el.data("pageshow");if(func){eval(func)}});$(document).on("pagehide","section",function(e){var $el=$(this);var func=$el.data("pagehide");if(func){eval(func)}if($el.data("cache")==false){$el.remove()}})};var _init_article=function(){$(document).on("articleshow",'article[data-scroll="true"]',function(){A.Element.scroll(this)});$(document).on("articleload","article",function(e){var $el=$(this);$el.data("__articleload_tag__",true);_initFormElement($el);_init_scroll_orientation($el);var func=$el.data("articleload");if(func){eval(func)}if($el.data("slider-page")){var key=A.cache._index++;$el.attr("__slider_page__",key);var slider=A.cache["__slider_page__"+key]=new A.Slider({selector:$el,container:$el,siliders:$el.find("[data-slider-page]"),showDots:false,onBeforeSlide:function(){slider.flush({slides:$el.find('[data-role="slider-page"]')});return true},onAfterSlide:function(i){var $target=$el.find('[data-role="slider-page"]:eq('+i+")").addClass("active").trigger("sliderpageshow");$target.siblings(".active").removeClass("active").trigger("sliderpagehide");var $section=$target.parents("section");var $refer=$section.find('[data-target="sliderPage"][href="#'+$target.attr("id")+'"]').addClass("active");$refer.siblings(".active").removeClass("active");A.Element.initScrollOrientation($refer.parents('[data-scroll-orientation="horizontal"]'),$refer)}})}});$(document).on("articleshow","article",function(e){var $el=$(this);if($el.data("title")){$el.parents("section").first().find("header .title").first().html(A.Util.script($el.data("title")))}_init_lazyload($el);if(!$el.data("__articleload_tag__")){$el.trigger("articleload")}var func=$el.data("articleshow");if(func){eval(func)}});$(document).on("articlehide","article",function(e){var $el=$(this);var func=$el.data("articlehide");if(func){eval(func)}if($el.data("cache")==false){$el.remove()}})};var _init_modal=function(){$(document).on("modalload",".modal",function(e){var $el=$(this);var func=$el.data("modalload");if(func){eval(func)}});$(document).on("modalshow",".modal",function(e){var $el=$(this);var showTag=$el.data("__modalshow_tag__");if(!showTag){$el.trigger("modalload");$el.data("__modalshow_tag__",true)}var func=$el.data("modalshow");if(func){eval(func)}});$(document).on("modalhide",".modal",function(e){var $el=$(this);var func=$el.data("modalhide");if(func){eval(func)}if($el.data("cache")==false){$el.remove()}})};var _init_scroll=function(selector){$.map(_getMatchElements($(selector),SELECTOR.scroll.selector),SELECTOR.scroll.handler)};var _init_scroll_orientation=function(el,targetObj){var $el=$(el);var orientation=$el.data("scroll-orientation");if(!orientation){$.map(_getMatchElements($el,SELECTOR.scrollOrientation.selector),SELECTOR.scrollOrientation.handler)}else{if(orientation=="horizontal"){setTimeout(function(){var scroller=A.Scroll($el,{hScroll:true,hScrollbar:false}).scroller;
if(targetObj.length>0){scroller.scrollToElement(targetObj[0])}},1)}else{if(orientation=="vertical"){SELECTOR.scroll.handler(el)}}}};var _init_inject=function(el){var $el=$(el);if(!$el.data("inject")){$.map(_getMatchElements($el,SELECTOR.inject.selector),SELECTOR.inject.handler);return}var tag="#"+$el.attr("id");if($el.attr("__inject_cache__")){return}$el.render()};var _init_lazyload=function(el){var $el=$(el);var source=A.Util.script($el.data("source"));if(!source){$.map(_getMatchElements($el,SELECTOR.lazyload.selector),SELECTOR.lazyload.handler);return}var placeholder=$el.attr("placeholder")||A.settings.lazyloadPlaceholder;if(!$el.attr("src")&&placeholder){$el.attr("src",placeholder)}var eTop=$el.offset().top;var validateDistance=100;var winHeight=$(window).height()+validateDistance;if(eTop<0||eTop>winHeight){return}var _injectImg=function(data){if(!$el.data("source")){return}A.anim($el,"fadeOut",200,function(){$el.css("visibility","hidden");$el.attr("src",data);$el.removeAttr("data-source");$el[0].onload=function(){A.anim($el,"fadeIn",200,function(){$el.css("visibility","visible")})}})};var type=$el.data("type");if(type=="base64"){A.ajax({url:source,success:function(data){_injectImg(data)},isBlock:false})}else{var img=new Image();img.src=source;if(img.complete){_injectImg(source);img=null}else{img.onload=function(){_injectImg(source);img=null}}}};var _init_toggle=function(el){var $el=$(el);if($el.find("div.toggle-handle").length>0){return}var name=$el.attr("name");var onValue=$el.data("on-value");onValue=typeof onValue=="undefined"?"":onValue;var offValue=$el.data("off-value");offValue=typeof offValue=="undefined"?"":offValue;if(name){$el.append('<input type="hidden" name="'+name+'" value="'+($el.hasClass("active")?onValue:offValue)+'"/>')}$el.append('<div class="toggle-handle"></div>');$el.tap(function(){var $t=$(this),v=$t.hasClass("active")?offValue:onValue;$t.toggleClass("active").trigger("toggle",[v]);$t.find("input").val(v)})};var _init_checkbox=_init_radio=function(el){$(el).tap(function(e){try{var $el=$(this);var checkObj=$el.find("input")[0];checkObj.checked=!checkObj.checked}catch(e){}return false})};var SELECTOR={section:{selector:"section",handler:_init_section},article:{selector:"article",handler:_init_article},scroll:{selector:'[data-scroll="true"]',handler:function(el){var zoom=$(el).data("zoom");var tag=zoom==true?true:false;setTimeout(function(){A.Scroll(el,{zoom:tag,hScroll:tag,onScrollEnd:function(){_init_lazyload(el)}})},1)}},inject:{selector:'[data-inject="true"]',handler:_init_inject},lazyload:{selector:"img[data-source]",handler:_init_lazyload},scrollOrientation:{selector:"[data-scroll-orientation]",handler:_init_scroll_orientation}};var FORM_SELECTOR={toggle:{selector:".toggle",handler:_init_toggle},checkbox:{selector:'[data-role="checkbox"]',handler:_init_checkbox},radio:{selector:'[data-role="radio"]',handler:_init_radio}};var _addFormSelector=function(type,selector,handler){FORM_SELECTOR[type]={selector:selector,handler:handler}};return{init:init,initForm:_initFormElement,scroll:_init_scroll,addFormSelector:_addFormSelector,initInject:_init_inject,initLazyload:_init_lazyload,initScrollOrientation:_init_scroll_orientation}})(A.$);A.AsideMenu=(function(e){var d,g,c;var f=function(){d=e("#aside_container");g=e("#section_container");if(e("#section_container_mask").length==0){c=e('<div id="section_container_mask"></div>').appendTo("#section_container")}c.on("tap",a);var o,i,m;var h=function(p){var q=p.touches[0];o={pageX:q.pageX,pageY:q.pageY,time:Number(new Date())};i=0;m=true};var n=function(p){if(!m){return}var q=p.touches[0];i=q.pageX-o.pageX};var k=function(q){if(!m){return}if(Math.abs(i)<6){return}var r=i>0?"right":"left";var p=e("#aside_container aside.active");if(p.data("position")==r){a()}m=false};c.on({"touchstart":h,"touchmove":n,"touchend":k,"touchcancel":k});d.on("tap",".agile-aside-close",a);var j=true;e(document).on("touchstart","section.active[data-aside-left],section.active[data-aside-right]",function(p){j=true;if(e(p.target).parents(A.settings.slidingException).length>0){j=false}});e(document).on("swipeRight","section.active[data-aside-left]",function(p){if(!j){return}b(e(this).data("aside-left"))});e(document).on("swipeLeft","section.active[data-aside-right]",function(p){if(!j){return}b(e(this).data("aside-right"))})};var b=function(j){var i=e(j).addClass("active"),o=i.data("transition"),h=i.data("position")||"left",m=i.data("show-close"),k=i.width(),n=h=="left"?k+"px":"-"+k+"px";if(m&&i.find("div.agile-aside-close").length==0){i.append('<div class="agile-aside-close"></div>')}A.Element.scroll(i);if(o=="overlay"){A.anim(i,{translateX:"0%"})}else{if(o=="reveal"){A.anim(g,{translateX:n})}else{A.anim(i,{translateX:"0%"});A.anim(g,{translateX:n})}}e("#section_container_mask").show();A.hasAsideMenuOpen=true};var a=function(k,o){var i=e("#aside_container aside.active"),n=i.data("transition"),h=i.data("position")||"left",m=h=="left"?"-100%":"100%";var j=function(){i.removeClass("active");
A.hasAsideMenuOpen=false;o&&o.call(this)};if(n=="overlay"){A.anim(i,{translateX:m},k,j)}else{if(n=="reveal"){A.anim(g,{translateX:"0"},k,j)}else{A.anim(i,{translateX:m},k);A.anim(g,{translateX:"0"},k,j)}}e("#section_container_mask").hide()};return{init:f,show:b,hide:a}})(A.$);A.Page=(function(b){var d=function(e){e=e?e:"";if(e.indexOf("#")==0){e=A.settings.basePagePath+e.replace("#","")+A.settings.basePageSuffix}return e};var a=function(e){return e.indexOf("#")==0?e.substr(1):e};var c=function(g,h){if(typeof g=="string"){g=A.Util.parseHash(g)}if(!g||!g.url){h&&h(null);return}var e=d(g.url);var f={url:e,timeout:20000,type:"GET",success:function(i){h&&h(i)},error:function(i){h&&h("")},isBlock:false};return A.ajax(f)};return{loadContent:c,formatURL:d}})(A.$);A.Router=(function(e){var h=[];var q=function(){e(window).on("popstate",a);e(document).on("click","a",function(t){var s=e(this).data("target"),r=e(this).attr("href");if(!r||r.match(/^#/)||s){t.preventDefault();return false}});e(document).on("tap","[data-target]",k);j()};var j=function(){var s=e("#section_container section").first();var r="#"+s.attr("id");p(r)};var a=function(s){if(s.state&&s.state.hash){var r=s.state.hash;if(h[1]&&r===h[1].hash){A.hasAsideMenuOpen&&A.AsideMenu.hide();A.hasPopupOpen&&A.Popup.close();f()}else{return}}else{return}};var k=function(){var t=e(this),s=t.data("target"),r=t.attr("href");if(n[s]){n[s](r,t)}};var p=function(r){var u=A.Util.parseHash(r);r=u.tag;var t=u.hash;if(A.hasAsideMenuOpen){A.AsideMenu.hide(200,function(){p(t)});return}var v=function(){var w=true;if(h.length==0){s.trigger("pageinit").trigger("pageshow").data("init",true).find("article.active").trigger("articleshow")}else{var x=h[0];if(x.hash===u.hash){return}w=(x.tag==u.tag);if(w){s.trigger("pageshow").find("article.active").trigger("articlehide")}else{o(x.tag,u.tag)}}d(t,w)};var s=e(r);if(s.length==0){if(A.settings.showPageLoading){A.showMask()}A.Page.loadContent(u,function(w){var x=e("<div>"+w+"</div>").find(r).data("source");A.Page.loadContent(x,function(z){if(A.settings.showPageLoading){A.hideMask()}if(x){z=A.Util.formatJSON(z);var y=template.compile(w);w=y(z)}if(e(r).length==0){e("#section_container").append(w)}s=e(r);v()})})}else{v()}};var f=function(){var s=h.shift().tag;var r=h[0].tag;o(s,r,true)};var o=function(t,s,r){A.Transition.run(t,s,r)};var d=function(s,r){var t=A.Util.parseHash(s);if(h.length>0&&e(h[0].tag).data("cache")==false){r=true}if(r){h.shift(t);window.history.replaceState(t,"",s)}else{window.history.pushState(t,"",s)}h.unshift(t)};var i=function(r,s){$el=e(s||"section.active:first");var v=A.Util.parseHash(r);r=v.tag;var t=$el.is("section")?$el:$el.parents("section").first();var u=t.find(r);var w=function(){if(u.hasClass("active")){return}var z=u.attr("id");if(z){t.find('a[data-target="article"]').each(function(C){$refer=e(this);var B=A.Util.parseHash($refer.attr("href"));if(B.tag=="#"+z){$refer.addClass("active")}else{$refer.removeClass("active")}})}else{$el.addClass("active").siblings(".active").removeClass("active")}var y=u;var x=u.addClass("active").siblings(".active");if(t.data("article-slider")){A.Transition.transArticle(t,x,y)}else{A.Transition.change({target:y,current:x,trigger:"article"})}};if(u.length==0){if(A.settings.showPageLoading){A.showMask()}A.Page.loadContent(v,function(x){var y=e("<div>"+x+"</div>").find(r).data("source");A.Page.loadContent(y,function(B){if(A.settings.showPageLoading){A.hideMask()}if(y){B=A.Util.formatJSON(B);var z=template.compile(x);x=z(B)}if(t.find(r).length==0){t.append(x)}u=t.find(r);w()})})}else{w()}};var m=function(r){A.hasAsideMenuOpen?A.AsideMenu.hide():A.AsideMenu.show(r)};var g=function(s){var t=A.Util.parseHash(s);s=t.tag;var r=function(u){var v=e(u);if(v.hasClass("active")){A.hasModalOpen=false;v.removeClass("active").trigger("modalhide").find("article").trigger("articleshow")}else{A.hasModalOpen=v;v.addClass("active").trigger("modalshow").find("article").trigger("articlehide")}};if(e(s).length==0){if(A.settings.showPageLoading){A.showMask()}A.Page.loadContent(t,function(u){var v=e("<div>"+u+"</div>").find(s).data("source");A.Page.loadContent(v,function(x){if(A.settings.showPageLoading){A.hideMask()}if(v){x=A.Util.formatJSON(x);var w=template.compile(u);u=w(x)}e("body").append(u);r(s)})})}else{r(s)}};var b=function(r){var v=e(r);if(v.length==0){return}var t=v.parents("article");var s=t.attr("__slider_page__");var u=A.cache["__slider_page__"+s];if(u){u.flush({slides:t.find('[data-role="slider-page"]')});u.index(v.index())}};var n={section:p,article:i,aside:m,back:function(){window.history.go(-1)},modal:g,sliderPage:b};var c=function(s,r){n[s]=r};return{init:q,goTo:p,showArticle:i,back:f,showModal:g,add:c,history:function(){return h},showSliderPage:b}})(A.$);A.Template=(function(c){var a=function(h,i,g){var f='<div class="agile-back-mask"><div class="agile-icon '+g+'"></div><div>'+i+"</div></div>";c(h).html(f)};var d=function(f){a(f,"没有找到相关数据","agile-drawer")};var e=function(f){a(f,"加载中...","agile-cloud-download")
};var b=function(f,h,k,j){var i=c(f),j=j||"replace";if(c.type(k)=="array"&&k.length==0){d(i)}else{var g=c(template(h,k));if(j=="replace"){i.html(g)}else{i.append(g)}A.Element.init(g)}};return{render:b,background:a,loading:e,no_result:d}})(A.$);A.Toast=(function(c){var f="toast",b,a,i={toast:'<a href="#">{value}</a>',success:'<a href="#"><i class="agile-toast-success"></i>{value}</a>',error:'<a href="#"><i class="agile-toast-error"></i>{value}</a></div>',info:'<a href="#"><i class="agile-toast-info"></i>{value}</a>'};var g=function(){c("body").append('<div id="agile_toast"></div>');b=c("#agile_toast");d()};var e=function(){A.anim(b,"scaleOut",function(){b.hide();b.empty()})};var h=function(j,n,m){if(a){clearTimeout(a)}var k=j.split(/\s/);f=k[0];b.attr("class",j).html(i[f].replace("{value}",n)).show();A.anim(b,"scaleIn");if(m!==0){a=setTimeout(e,m||A.settings.toastDuration)}};var d=function(){b.on("tap",'[data-target="close"]',function(){e()})};g();return{show:h,hide:e}})(A.$);A.Transition=(function(g){var m,b,c,a,f={empty:[["","empty"],["empty",""]],slide:[["slideLeftOut","slideLeftIn"],["slideRightOut","slideRightIn"]],cover:[["","slideLeftIn"],["slideRightOut",""]],slideUp:[["","slideUpIn"],["slideDownOut",""]],slideDown:[["","slideDownIn"],["slideUpOut",""]],popup:[["","scaleIn"],["scaleOut",""]],flip:[["slideLeftOut","flipOut"],["slideRightOut","flipIn"]]};var k=function(){b.trigger("beforepagehide",[m]);c.trigger("beforepageshow",[m]);var o="anim "+(a[0]||"empty"),n="anim animating "+(a[1]||"empty");b.bind("webkitAnimationEnd",function(){i(o,n)}).addClass(o);c.addClass(n)};var i=function(o,n){b.off("webkitAnimationEnd");c.off("webkitAnimationEnd");b.removeClass(o).removeClass("active");c.removeClass(n).addClass("active");!c.data("init")&&c.trigger("pageinit").data("init",true);!b.data("init")&&b.trigger("pageinit").data("init",true);b.trigger("pagehide",[m]);c.trigger("pageshow",[m]);b.find("article.active").trigger("articlehide");c.find("article.active").trigger("articleshow");b=c=null};var e=function(q,p,n){g(":focus").trigger("blur");m=n;b=g(q);c=g(p);var o=m?b.attr("data-transition"):c.attr("data-transition");o=o||A.settings.transitionType||"empty";a=m?f[o][1]:f[o][0];k()};var d=function(o,q,p,r,n){if(f[o]){console.error("该转场动画已经存在，请检查你自定义的动画名称(名称不能重复)");return}f[o]=[[q,p],[r,n]]};var h=function(p){var o=g(p.target);var n=g(p.current);var q=o.data("transition");var r=o.data("transition");q=f[q]?f[q][0][1]:"empty";r=f[r]?f[r][0][0]:"empty";A.anim(o,q,function(){o.addClass("active");if(p.trigger){o.trigger(p.trigger+"show")}});A.anim(n,r,function(){n.removeClass("active");if(p.trigger){n.trigger(p.trigger+"hide")}})};var j=function(r,q,p){if(!p||p.length==0){return}var o,n;n=q.index()<p.index()?"left":"right";o=n=="left"?"Left":"Right";A.anim(q,"slide"+o+"Out",function(){q.removeClass("active").trigger("articlehide")});A.anim(p,"slide"+o+"In",function(){p.addClass("active").trigger("articleshow");var s=p.attr("id");if(!s){return}r.find('a[data-target="article"]').each(function(v){var u=g(this);var t=A.Util.parseHash(u.attr("href"));if(t.tag=="#"+s){u.addClass("active");A.Element.initScrollOrientation(u.parents('[data-scroll-orientation="horizontal"]'),u)}else{u.removeClass("active")}})})};return{run:e,add:d,change:h,transArticle:j}})(A.$);A.Util=(function($){var parseHash=function(hash){var url=hash;url=_script(url);var tag,query,param={};var arr=hash.split("?");tag=arr[0];if(arr.length>1){var seg,s;query=arr[1];seg=query.split("&");for(var i=0;i<seg.length;i++){s=seg[i].split("=");param[s[0]]=s[1]}}if(tag.indexOf("#")!=0){var p=A.Util.parseURL(url);if(p.getFragment()){tag="#"+p.getFragment()}else{var tags=tag.split("/");tag=tags[tags.length-1];tag="#"+tag.split(".")[0]}hash=tag+(arr.length>1?"?"+arr[1]:"");url=url.replace(new RegExp(tag,"g"),"")}return{url:url,hash:hash,tag:tag,query:query,param:param}};var _formatJSON=function(data){return data?(typeof data=="string"?eval("("+data+")"):data):{}};var formatDate=function(date,format){var o={"M+":date.getMonth()+1,"d+":date.getDate(),"h+":date.getHours(),"m+":date.getMinutes(),"s+":date.getSeconds(),"q+":Math.floor((date.getMonth()+3)/3),"S":date.getMilliseconds()};if(/(y+)/.test(format)){format=format.replace(RegExp.$1,(date.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(format)){format=format.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length))}}return format};var URLParser=function(url){this._fields={"Username":4,"Password":5,"Port":7,"Protocol":2,"Host":6,"Pathname":8,"URL":0,"Querystring":9,"Fragment":10};this._values={};this._regex=null;this.version=0.1;this._regex=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/;for(var f in this._fields){this["get"+f]=this._makeGetter(f)}if(typeof url!="undefined"){this._parse(url)}};URLParser.prototype.setURL=function(url){this._parse(url)};URLParser.prototype._initValues=function(){for(var f in this._fields){this._values[f]=""
}};URLParser.prototype._parse=function(url){this._initValues();var r=this._regex.exec(url);if(!r){throw"DPURLParser::_parse -> Invalid URL"}for(var f in this._fields){if(typeof r[this._fields[f]]!="undefined"){this._values[f]=r[this._fields[f]]}}};URLParser.prototype._makeGetter=function(field){return function(){return this._values[field]}};var _isCrossDomain=function(url){if(!url||url.indexOf(":")<0){return false}var urlOpts=A.Util.parseURL(url);if(!urlOpts.getProtocol()){return false}return !((location.protocol.replace(":","")+location.host)==(urlOpts.getProtocol()+urlOpts.getHost()+":"+urlOpts.getPort()))};var _script=function(str){return str?str.trim().replace(/\$\{([^\}]*)\}/g,function(s,s1){try{return eval(s1.trim())}catch(e){return""}}):""};var checkBoolean=function(){var result=false;for(var i=0;i<arguments.length;i++){if(typeof arguments[i]=="boolean"){return arguments[i]}}return result};var _eval=function(str){str=(str||"").trim();var obj={};str.replace(/\$\{(.*]*)\}/g,function(s,s1){obj=eval("("+s1.trim()+")");return""});return obj};var _ajax=function(opts){if(!opts||!opts.url){return}opts.url=_script(opts.url);var random="__ajax_random__="+Math.random();opts.url+=(opts.url.split(/\?|&/i).length==1?"?":"&")+random;var _isBlock=A.Util.checkBoolean(opts.isBlock,A.settings.showPageLoading);var ajaxData={url:opts.url,timeout:20000,type:opts.type||"get",dataType:opts.dataType||"text",success:function(html){opts.success&&opts.success(html);if(_isBlock){A.hideMask()}},error:function(html){opts.error&&opts.error(null);if(_isBlock){A.hideMask()}}};var isCross=_isCrossDomain(opts.url);var handler=$.ajax;if(isCross){ajaxData.dataType="jsonp";handler=A.settings.crossDomainHandler||handler}if(ajaxData.dataType.toLowerCase()=="jsonp"){ajaxData.jsonp=opts.jsonp||"__jsonpcallback"}if(_isBlock){A.showMask()}handler(ajaxData)};return{parseHash:parseHash,formatDate:formatDate,formatJSON:_formatJSON,parseURL:function(url){return new URLParser(url)},isCrossDomain:_isCrossDomain,script:_script,eval:_eval,ajax:_ajax,checkBoolean:checkBoolean}})(A.$);(function(){A.cache={};A.cache._index=0;A.cache.set=function(b,a){window.localStorage.setItem(b,JSON.stringify(a))};A.cache.get=function(a){return JSON.parse(window.localStorage.getItem(a))};A.cache.remove=function(a){window.localStorage.removeItem(a)}})();(function($){A.anim=function(el,animName,duration,ease,callback){var d,e,c;var len=arguments.length;for(var i=2;i<len;i++){var a=arguments[i];var t=$.type(a);t=="number"?(d=a):(t=="string"?(e=a):(t=="function")?(c=a):null)}$(el).animate(animName,d||A.settings.transitionTime,e||A.settings.transitionTimingFunc,c)};A.showMask=function(text,closeCallback){if(typeof text=="function"){closeCallback=text;text=""}A.Popup.loading(text,closeCallback)};A.hideMask=function(){A.Popup.close(true)};A.showToast=function(text,type,duration){type=type||"toast";A.Toast.show(type,text,duration)};A.hideToast=function(){A.Toast.hide()};A.alert=function(title,content){A.Popup.alert(title,content)};A.confirm=function(title,content,okCall,cancelCall){A.Popup.confirm(title,content,okCall,cancelCall)};A.popup=function(options){A.Popup.show(options)};A.closePopup=function(){A.Popup.close()};A.popover=function(html,pos,arrowDirection,onShow){A.Popup.popover(html,pos,arrowDirection,onShow)};A.tmpl=function(containerSelector,templateId,data,type){A.Template.render(containerSelector,templateId,data,type)};A.ajax=A.Util.ajax;A.render=function(opts){var options={container:null,tmpl:null,tmplSource:null,tmplId:null,data:null,dataSource:null,type:"after",callback:function(){}};$.extend(options,opts);var handleHTML=function(opts,callback){if(opts.tmpl){callback(opts.tmpl)}else{var url=opts.tmplId||opts.tmplSource;if(!url){callback("");return}var html="";var hashObj=A.Util.parseHash(url);var $script=$(hashObj.tag);var scriptKey="__TEMPLATE_"+hashObj.tag+"__";if(A.cache[scriptKey]){callback(A.cache[scriptKey])}else{if($script.length==0){A.Page.loadContent(hashObj,function(h){html=h||"";callback(html);A.cache[scriptKey]=html})}else{if($script.html().trim()==""&&$script.attr("src")){A.Page.loadContent($script.attr("src"),function(h){html=h||"";$script.text(html);callback($script);A.cache[scriptKey]=$script})}else{html=$script;callback(html);A.cache[scriptKey]=html}}}}};var handleData=function(opts,callback){if(opts.data){callback(typeof opts.data=="string"?A.Util.eval(opts.data):opts.data)}else{if(opts.dataSource){var hashObj=A.Util.parseHash(opts.dataSource);A.Page.loadContent(hashObj,function(data){data=A.Util.formatJSON(data);callback(data)})}else{callback({})}}};handleHTML(options,function(html){var $target,type=options.type||"after";var $html=$(html);if(!$html.is("script")){options.container=$html;$html=$('<script type="text/html"><\/script>').append($html.html())}var typeMap={replace:"html",after:"append",before:"prepend"};if(options.container&&options.container.length>0){var $target=$(options.container)}else{for(var k in typeMap){var container=$html.data(k);
if(container){$target=$(container);type=k;break}}}var _isShowBlock=false;_isShowBlock=A.Util.checkBoolean($html.data("loading")||_isShowBlock);if(_isShowBlock){A.showMask()}handleData(options,function(o){if(!o||o=={}||o==[]){options.callback("",null);return}try{html=$(template.compile($html.html())(o))}catch(e){html=""}if($target&&$target.length>0){$target[typeMap[type]](html);A.Element.init(html)}options.callback(html,o);if(_isShowBlock){A.hideMask()}})})}})(A.$);A.Popup=(function(f){var c,p,m,h,j={"top":{top:0,left:0,right:0},"top-second":{top:"44px",left:0,right:0},"center":{top:"50%",left:"5%",right:"5%","border-radius":"3px"},"bottom":{bottom:0,left:0,right:0},"bottom-second":{bottom:"51px",left:0,right:0}},d={top:["slideDownIn","slideUpOut"],bottom:["slideUpIn","slideDownOut"],defaultAnim:["bounceIn","bounceOut"]},r={alert:'<div class="popup-title">{title}</div><div class="popup-content">{content}</div><div id="popup_btn_container"><a data-target="closePopup" class="agile-icon agile-popup-alert-ok">{ok}</a></div>',confirm:'<div class="popup-title">{title}</div><div class="popup-content">{content}</div><div id="popup_btn_container"><a class="cancel agile-icon agile-popup-alert-cancel">{cancel}</a><a class="agile-icon agile-popup-alert-ok">{ok}</a></div>',loading:'<i class="agile-icon agile-popup-spinner spinner"></i><p>{title}</p>'};var o=function(){f("body").append('<div id="agile_popup"></div><div id="agile_popup_mask"></div>');p=f("#agile_popup_mask");c=f("#agile_popup");n()};var q=function(u){var w={height:undefined,width:undefined,opacity:0.3,url:null,tplId:null,tplData:{},html:"",pos:"center",clickMask2Close:true,showCloseBtn:true,arrowDirection:undefined,animation:true,timingFunc:"linear",duration:200,onShow:undefined,onHide:undefined,onClose:undefined};f.extend(w,u);h=w.clickMask2Close;p.css("opacity",w.opacity);c.attr({"style":"","class":""});w.width&&c.width(w.width);w.height&&c.height(w.height);var x=f.type(w.pos);if(x=="object"){c.css(w.pos);m=d["defaultAnim"]}else{if(x=="string"){if(j[w.pos]){c.css(j[w.pos]);var t=w.pos.indexOf("top")>-1?"top":(w.pos.indexOf("bottom")>-1?"bottom":"defaultAnim");m=d[t]}else{c.addClass(w.pos);m=d["defaultAnim"]}}else{return}}p.show();var v;if(w.html){v=w.html}else{if(w.url){v=A.Page.loadContent(w.url)}else{if(w.tplId){v=template(w.tplId,w.tplData)}}}if(w.showCloseBtn){v+='<div id="tag_close_popup" data-target="closePopup" class="agile-icon agile-popup-close"></div>'}if(w.arrowDirection){c.addClass("arrow "+w.arrowDirection);c.css("padding","8px");if(w.arrowDirection=="top"||w.arrowDirection=="bottom"){m=d[w.arrowDirection]}}c.html(v).show();A.Element.init(c);w.onShow&&w.onShow.call(c);f(document).trigger("popupshow",[c]);w.onHide&&f(document).on("popuphide",function(){w.onHide();w.onHide=undefined});w.onClose&&f(document).on("popupclose",function(){w.onClose();w.onClose=undefined});if(w.pos=="center"){var s=c.height();c.css("margin-top","-"+s/2+"px")}if(w.animation){A.anim(c,m[0],w.duration,w.timingFunc)}A.hasPopupOpen=true};var g=function(s){p.hide();if(m&&!s){A.anim(c,m[1],200,function(){c.hide().empty();A.hasPopupOpen=false})}else{c.hide().empty();A.hasPopupOpen=false}f(document).trigger("popuphide")};var n=function(){var s=function(){g();f(document).trigger("popupclose")};p.on("tap",function(){h&&s()});c.on("tap",'[data-target="closePopup"]',function(){s()})};var k=function(u,t,v){var s=r.alert.replace("{title}",u).replace("{content}",t).replace("{ok}",v||"确定");q({html:s,pos:"center",clickMask2Close:false,showCloseBtn:false})};var a=function(w,u,v,s){var t=r.confirm.replace("{title}",w).replace("{content}",u).replace("{cancel}","取消").replace("{ok}","确定");q({html:t,pos:"center",clickMask2Close:false,showCloseBtn:false});f("#popup_btn_container .agile-popup-alert-ok").tap(function(){g();v.call(this)});f("#popup_btn_container .agile-popup-alert-cancel").tap(function(){g();s.call(this)})};var i=function(s,v,t,u){q({html:s,pos:v,showCloseBtn:false,arrowDirection:t,onShow:u})};var e=function(t,u){var s=r.loading.replace("{title}",t||"加载中...");q({html:s,pos:"loading",opacity:0.1,animation:true,clickMask2Close:false,onClose:u})};var b=function(v,t){var s='<div class="actionsheet">';var u="button block agile-popup-actionsheet-normal";var w="button block agile-popup-actionsheet-cancel";t=t==false?false:true;f.each(v,function(x,y){s+='<button class="'+(y.css||u)+'">'+y.text+"</button>"});if(t==true){s+='<button class="'+w+'">取消</button>'}s+="</div>";q({html:s,pos:"bottom",showCloseBtn:false,onShow:function(){f(this).find("button").each(function(y,x){f(x).on("tap",function(){if(v[y]&&v[y].handler){v[y].handler.call(x)}g()})})}})};o();return{show:q,close:g,alert:k,confirm:a,popover:i,loading:e,actionsheet:b}})(A.$);(function(a){var b=function(s,d){var o={months:["01月","02月","03月","04月","05月","06月","07月","08月","09月","10月","11月","12月"],days:["日","一","二","三","四","五","六"],swipeable:true,date:new Date(),onRenderDay:undefined,onSelect:undefined},r=this,w=a(s),e,c,i,m,v,q;var k=function(){r.settings=a.extend({},o,d);
v=r.settings.date.getFullYear();q=r.settings.date.getMonth();m=new Date(v,q,r.settings.date.getDate());j();h()};var t=function(x){return(new Date(x.getFullYear(),x.getMonth(),1)).getDay()};var u=function(x){return(new Date(x.getFullYear(),x.getMonth()+1,0)).getDate()};var j=function(){var y="";y+='<div class="agile-calendar">';y+=f(v,q);y+=g();y+='<div class="agile-calendar-body">';y+=n(m);y+="</div></div>";w.html(y);var x=w.find("span");e=x.eq(0);c=x.eq(1);i=w.find(".agile-calendar-body")};var f=function(y,z){var x='<div class="agile-calendar-nav">';x+='<div><i class="agile-icon agile-calendar-pre __previous" data-year='+y+"></i><span>"+y+'</span><i class="agile-icon agile-calendar-next __next" data-year='+y+"></i></div>";x+='<div><i class="agile-icon agile-calendar-pre __previous" data-month='+z+"></i> <span>"+r.settings.months[z]+'</span><i class="agile-icon agile-calendar-next __next" data-month='+z+"></i></div>";x+="</div>";return x;l};var g=function(){var y="<table><thead><tr>";for(var x=0;x<7;x++){y+="<th>"+r.settings.days[x]+"</th>"}y+="</tr></thead></table>";return y};var n=function(z){var x=t(z),F=u(z),E=Math.ceil((x+F)/7),D,C="";v=z.getFullYear();q=z.getMonth();D=new Date(v,q,1-x);C+="<table><tbody>";for(var B=0;B<E;B++){C+="<tr>";for(var y=0;y<7;y++){C+=p(D,q);D.setDate(D.getDate()+1)}C+="</tr>"}C+="</tbody></table>";return C};var p=function(y,D){var B=(y.getMonth()!==D);var x=r.format(y);var C=(r.format(r.settings.date)==x)?"active":"";var z=y.getDate();if(r.settings.onRenderDay){z=r.settings.onRenderDay.call(null,z,x)}return B?"<td>&nbsp;</td>":'<td data-selected="selected" class="'+C+'" data-date= '+x+">"+z+"</td>"};var h=function(){var x,y;w.on("tap",function(B){x=a(B.target);if(x.is("[data-year].__next")){m.setFullYear(m.getFullYear()+1);r.refresh(m)}else{if(x.is("[data-year].__previous")){m.setFullYear(m.getFullYear()-1);r.refresh(m)}else{if(x.is("[data-month].__next")){m.setMonth(m.getMonth()+1);r.refresh(m)}else{if(x.is("[data-month].__previous")){m.setMonth(m.getMonth()-1);r.refresh(m)}}}}y=x.closest("td");if(!x.is("td")&&y.length>0){x=y}if(x.is("td")){var z=x.data("date");if(z&&r.settings.onSelect){r.settings.onSelect.call(x[0],z)}}});w.on("swipeLeft",function(){m.setMonth(m.getMonth()+1);r.refresh(m)});w.on("swipeRight",function(){m.setMonth(m.getMonth()-1);r.refresh(m)})};this.refresh=function(B){var C=new Date(v,q,1),y=new Date(B.getFullYear(),B.getMonth(),1),D=undefined,z;if(C.getTime()==y.getTime()){return}D=C<y?"slideLeftRound":"slideRightRound";e.text(B.getFullYear());c.text(this.settings.months[B.getMonth()]);var x=n(B);A.anim(i,D,function(){i.html(x)})};k()};b.prototype.parse=function(d){var c=/^(\d{4})(?:\-|\/)(\d{1,2})(?:\-|\/)(\d{1,2})$/;return c.test(d)?new Date(parseInt(RegExp.$1,10),parseInt(RegExp.$2,10)-1,parseInt(RegExp.$3,10)):null};b.prototype.format=function(e){var g=e.getFullYear(),c=e.getMonth()+1,f=e.getDate();c=(c<10)?("0"+c):c;f=(f<10)?("0"+f):f;return g+"-"+c+"-"+f};A.Calendar=b})(A.$);(function(c){var a={},b=1;A.Scroll=function(e,i){var d,f,h=c(e),g={hScroll:false,bounce:true,lockDirection:true,useTransform:true,useTransition:false,checkDOMChanges:true,hideScrollbar:true,fadeScrollbar:true,zoom:false,scrollbarClass:"agile-scrollbar",onBeforeScrollStart:function(k){var j=k.target;while(j.nodeType!=1){j=j.parentNode}if(j.tagName!="SELECT"&&j.tagName!="INPUT"&&j.tagName!="TEXTAREA"){k.preventDefault()}},onRefreshEnd:function(){var k=h.find(":focus");if(k.length>0){var j=k.offset().top;var m=c(window).height();if(j>m){scroller.scrollTo(0,j-m/2,0,true)}}}};f=h.data("_jscroll_");if(f&&a[f]){d=a[f];c.extend(d.scroller.options,i);d.scroller.refresh();return d}else{f="_jscroll_"+b++;h.data("_jscroll_",f);c.extend(g,i);scroller=new iScroll(h[0],g);return a[f]={scroller:scroller,destroy:function(){scroller.destroy();delete a[f]}}}}})(A.$);(function(b){function a(w,z){var F=function(){},o=function(){return true},y=false,i=0,x=200,h,j,q,s,d,e,E,v,B=0;var u=this;var C="",g;if(b.isPlainObject(w)){h=b(w.selector);z=w.showDots;o=w.onBeforeSlide||o;F=w.onAfterSlide||F;v=w.autoPlay;B=w.interval||3000;x=w.speed||x;q=w.container;s=w.slides}else{h=b(w)}if(h.data("role")=="banner"){C="banner"}var f=this.flush=function(I){I=I||{};s=I.slides;d=s.length;q.css("width",d*e).attr("__is_slider__",true);s.css({"width":e,"float":"left"}).show()};var m=function(I){I=I||{};q=q?q:h.children().first();e=h.offset().width;f({slides:s?s:q.children()});if(z==undefined){z=true}z&&p();k();r(0,0);F(0);v&&D()};var k=function(){if(C=="banner"){h.find(".slider_label").remove();g=h.append('<div class="slider_label"></div>').find(".slider_label")}};var t=function(I){I=arguments.length==0?0:I;if(g){g.html(b(s.get(I)).find("[data-title]").data("title"))}};var D=function(){setTimeout(function(){if(i==d-1){r(0)}else{u.next()}D()},B)};var p=function(){j=h.find(".dots");if(j.length>0){j.show()}else{var K=d*20;var J='<div class="dots"><ul>';for(var I=0;I<d;I++){J+='<li index="'+I+'"';if(I==0){J+='class="active"'}J+='><a href="#"></a></li>'
}J+="</ul></div>";h.append(J);j=h.find(".dots");j.children().css("width",K+"px");j.find("li").on("tap",function(){var L=b(this).attr("index");r(parseInt(L),x)})}};var r=function(I,J){J=J||x;q.css({"-webkit-transition-duration":J+"ms","-webkit-transform":"translate3D("+-(I*e)+"px,0,0)"});if(i!=I){i=I;if(j){b(j.find("li").get(i)).addClass("active").siblings().removeClass("active")}t(i);F(i)}else{t(i)}};var H=function(){q.on("touchstart",G,false);q.on("touchmove",c,false);q.on("touchend",n,false)};var G=function(I){var J=I.touches[0];start={pageX:J.pageX,pageY:J.pageY,time:Number(new Date())};isScrolling=undefined;E=0;q[0].style.webkitTransitionDuration=0;y=true;if(b(I.target).closest("[__is_slider__]")[0]==q[0]){y=true}else{y=false}};var c=function(J){if(!y){return}var K=J.touches[0];E=K.pageX-start.pageX;if(typeof isScrolling=="undefined"){isScrolling=Math.abs(E)<Math.abs(K.pageY-start.pageY)}if(!isScrolling){J.preventDefault();var I=!i&&E>0||i==d-1&&E<0;if(I){return}var L=(E-i*e);q[0].style.webkitTransform="translate3D("+L+"px,0,0)"}};var n=function(K){var J=(Number(new Date())-start.time<250&&Math.abs(E)>20)||Math.abs(E)>e/3;var I=!i&&E>0||i==d-1&&E<0;if(!isScrolling){if(o(i,E)){r(i+(J&&!I?(E<0?1:-1):0),x)}else{r(i)}}y=false};m();H();this.refresh=function(){q.attr("style","");m(opts)};this.prev=function(){if(i){r(i-1,x)}};this.next=function(){if(i<d-1){r(i+1,x)}};this.index=function(I){if(arguments.length==0){return i}else{r(I)}}}A.Slider=a})(A.$);(function(d){var a={},c=1;function b(f,n,p){var k,i,j,o,e,h,r,q={selector:undefined,type:"pullDown",minPullHeight:10,pullText:"下拉刷新更多",releaseText:"松开加载更新",refreshText:"加载中请稍后",refreshTip:false,onPullIcon:"agile-icon agile-refresh-down-icon",onReleaseIcon:"agile-refresh-icon-reverse",onRefreshIcon:"agile-refresh-spinner spinner",callback:undefined};if(typeof f==="object"){d.extend(q,f)}else{q.selector=f;q.type=n;q.callback=p;if(n==="pullUp"){d.extend(q,{pullText:"上拉加载更多",releaseText:"松开加载更新",refreshText:"加载中请稍后",onPullIcon:"agile-icon agile-refresh-up-icon",})}}r=q.type==="pullDown"?true:false;var m=function(t){i=d(t.selector).children()[0];var s='<div class="agile-refresh-container"><span class="agile-refresh-icon '+t.onPullIcon+'"></span><span class="agile-refresh-label">'+t.pullText+"</span>"+(t.refreshTip?'<div class="agile-refresh-tip">'+t.refreshTip+"</div>":"")+"</div>";if(r){j=d(s).prependTo(i)}else{j=d(s).appendTo(i)}h=j.height();o=j.find(".agile-refresh-icon");e=j.find(".agile-refresh-label")};var g=function(s){return A.Scroll(s.selector,{topOffset:r?h:0,bounce:true,onScrollMove:function(){if(!r&&this.y>=0){}else{if(this.y>s.minPullHeight&&r&&!o.hasClass(s.onReleaseIcon)){o.addClass(s.onReleaseIcon);e.html(s.releaseText);this.minScrollY=0}else{if(this.y<s.minPullHeight&&r&&o.hasClass(s.onReleaseIcon)){o.removeClass(s.onReleaseIcon);e.html(s.pullText);this.minScrollY=-h}else{if(this.y<(this.maxScrollY-s.minPullHeight)&&!r&&!o.hasClass(s.onReleaseIcon)){o.addClass(s.onReleaseIcon);e.html(s.releaseText);this.maxScrollY=this.maxScrollY}else{if(this.y>(this.maxScrollY+s.minPullHeight)&&!r&&o.hasClass(s.onReleaseIcon)){o.removeClass(s.onReleaseIcon);e.html(s.pullText);this.maxScrollY=h}}}}}},onScrollEnd:function(){if(o.hasClass(s.onReleaseIcon)){o.removeClass(s.onReleaseIcon).removeClass(s.onPullIcon).addClass(s.onRefreshIcon);e.html(s.refreshText);var t=this;setTimeout(function(){s.callback.call(t)},1)}A.Element.initLazyload(d(s.selector))},onRefresh:function(){o.removeClass(s.onRefreshIcon).addClass(s.onPullIcon);e.html(s.pullText)}})};m(q);k=g(q);return k}A.Refresh=function(e,i,j){var h,g;if(e.selector){h=d(e.selector)}else{h=d(e)}g=h.data("_refresh_");if(g&&a[g]){return a[g]}else{g="_refresh_"+c++;h.data("_refresh_",g);var f=new b(e,i,j);return a[g]={scroller:f.scroller,destroy:function(){delete a[g];f.scroller.destroy();d(".refresh-container",e).remove()}}}}})(A.$);(function(a){a.fn.render=function(f){var e=a(this);if(!e.data("inject")){return}var d={data:null,dataSource:e.data("source")};a.extend(d,f);delete d.container;if(!(d.data||d.dataSource)){return}var c="#"+e.attr("id");d.tmplId=c;d.callback=function(i,j){var g=e;var h=a('[__inject_dependence__="'+c+'"]');if(d.type=="replace"){a('[__inject_dependence__="'+c+'"]').remove()}else{if(d.type=="after"){g=h.length==0?e:h.last()}else{if(d.type=="before"){}}}e.attr("__inject_cache__",true);g.after(a(i).attr("__inject_dependence__",c));A.Element.init(e.parent());if(f&&f.callback){f.callback(i,j)}};A.render(d)};a.fn.renderReplace=function(c,d){b(this,"replace",c,d)};a.fn.renderAfter=function(c,d){b(this,"after",c,d)};a.fn.renderBefore=function(c,d){b(this,"before",c,d)};function b(d,c,f,g){if(typeof f=="function"&&g==null){g=f;f=null}var e={};e.type=c;if(typeof f=="string"){e.dataSource=f}else{if(typeof f=="object"){e.data=f}}e.callback=g;a(d).render(e)}})(A.$);var aJSON=(function(){var JSON={};JSON.parse=function(str){try{return eval("("+str+")")}catch(e){return null}};JSON.stringify=function(o){var r=[];if(typeof o=="string"){return'"'+o.replace(/([\'\"\\])/g,"\\$1").replace(/(\n)/g,"\\n").replace(/(\r)/g,"\\r").replace(/(\t)/g,"\\t")+'"'
}if(typeof o=="undefined"){return""}if(typeof o!="object"){return o.toString()}if(o===null){return null}if(o instanceof Array){for(var i=0;i<o.length;i++){r.push(this.stringify(o[i]))}r="["+r.join()+"]"}else{for(var i in o){r.push('"'+i+'":'+this.stringify(o[i]))}r="{"+r.join()+"}"}return r};window.JSON=JSON;return JSON})();